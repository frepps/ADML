---
/**
 * Citat component â€” renders a styled blockquote.
 *
 * ADML usage:
 *   <#citat: Quote text here.
 *     author: Author Name
 *     source: Source Title
 *   >
 *
 * Or with nested content:
 *   <#citat: [[
 *       First paragraph of the quote.
 *       Second paragraph.
 *     ]]
 *     author: Author Name
 *   >
 *
 * Props:
 *   - author: Attribution name (rendered in <footer>)
 *   - source: Source title (rendered in <cite>)
 *   - Any other props become HTML attributes on the <blockquote>
 *
 * Mods are added as CSS classes alongside "citat".
 */
interface Props {
  value?: string | any[];
  mods?: string[];
  props?: Record<string, any>;
}

const { mods = [], props: itemProps = {} } = Astro.props;
const { author, source, class: propsClass, ...restProps } = itemProps;
const classes = ['citat', ...mods, propsClass].filter(Boolean).join(' ');
---

<blockquote class={classes} {...restProps}>
  <div class="citat-content">
    <slot />
  </div>
  {author && <footer class="citat-author">&mdash; {String(author)}</footer>}
  {source && <cite class="citat-source">{String(source)}</cite>}
</blockquote>

<style>
  blockquote {
    border-left: 3px solid var(--color-accent);
    margin: 1.5rem 0;
    padding: 1rem 1.5rem;
    background: var(--color-surface);
    border-radius: 0 var(--radius) var(--radius) 0;
  }

  .citat-content :global(p) {
    font-size: 1.125rem;
    font-style: italic;
    margin: 0;
  }

  .citat-author {
    font-weight: 600;
    margin-top: 0.75rem;
    font-size: 0.9375rem;
    color: var(--color-text);
    font-style: normal;
  }

  .citat-source {
    font-style: italic;
    color: var(--color-muted);
    font-size: 0.875rem;
    display: block;
    margin-top: 0.25rem;
  }
</style>
